!function(e,t,a){"use strict";var i,r={init:function(){r.loadSizeChartMenuScript(),r.loadChartCategorySelect2(),r.loadProductChartSelect2(),r.loadColorPicker(),r.loadPreviewSizeChart(),r.loadSizeChartProductMetaColumn(),r.loadSizeChartProductMetaAjax(),r.deleteSizeChartImage(),r.closeSizeChartModal(),r.requiredSizeChartTitle(),r.deleteAssignedProducts()},loadSizeChartMenuScript:function(){var t=e("#toplevel_page_dots_store");"admin_page_size-chart-setting-page"!==sizeChartScriptObject.size_chart_current_screen_id&&"dotstore-plugins_page_size-chart-information"!==sizeChartScriptObject.size_chart_current_screen_id||(t.addClass("wp-has-current-submenu wp-menu-open menu-top menu-top-first").removeClass("wp-not-current-submenu"),e("#toplevel_page_dots_store > a").addClass("wp-has-current-submenu current").removeClass("wp-not-current-submenu"),e("li#menu-posts").removeClass("wp-not-current-submenu wp-has-current-submenu wp-menu-open current"),e("li.mine").css("display","none"),e("li.publish").css("display","none"),e('a[href="admin.php?page='+sizeChartScriptObject.size_chart_get_started_page_slug+'"]').parent().addClass("current"),e(".page-title-action").remove()),"edit-size-chart"!==sizeChartScriptObject.size_chart_current_screen_id&&"size-chart"!==sizeChartScriptObject.size_chart_current_screen_id||(t.addClass("wp-has-current-submenu wp-menu-open menu-top menu-top-first").removeClass("wp-not-current-submenu"),e("#toplevel_page_dots_store > a").addClass("wp-has-current-submenu current").removeClass("wp-not-current-submenu"),e("li#menu-posts").removeClass("wp-not-current-submenu wp-has-current-submenu wp-menu-open current"),e("li.mine").css("display","none"),e("li.publish").css("display","none"),e('a[href="admin.php?page='+sizeChartScriptObject.size_chart_get_started_page_slug+'"]').parent().addClass("current"),e(".page-title-action").remove()),e("#toplevel_page_dots_store ul li").each(function(){void 0!==sizeChartScriptObject.size_chart_plugin_menu_url&&(sizeChartScriptObject.size_chart_plugin_name===e(this).text()&&e(this).find("a").attr("href",sizeChartScriptObject.size_chart_plugin_menu_url),sizeChartScriptObject.size_chart_plugin_menu_url===e(this).find("a").attr("href")&&e(this).find("a").attr("href",sizeChartScriptObject.size_chart_plugin_menu_url))}),"admin.php?page="+sizeChartScriptObject.size_chart_get_started_page_slug===t.find("a").attr("href")&&void 0!==sizeChartScriptObject.size_chart_plugin_menu_url&&t.find("a").attr("href",sizeChartScriptObject.size_chart_plugin_menu_url)},loadChartCategorySelect2:function(){var t={escapeMarkup:function(e){return e},maximumSelectionLength:100};e("#chart-categories").selectWoo(t).addClass("enhanced");t={escapeMarkup:function(e){return e},maximumSelectionLength:100};e("#chart-tags").selectWoo(t).addClass("enhanced");t={escapeMarkup:function(e){return e},maximumSelectionLength:100};e("#chart-attributes").selectWoo(t)},loadProductChartSelect2:function(){e(":input#prod-chart").filter(":not(.enhanced)").each(function(){var t=[],a={allowClear:!!e(this).data("allow_clear"),placeholder:e(this).data("placeholder"),minimumInputLength:e(this).data("minimum_input_length")?e(this).data("minimum_input_length"):"1",escapeMarkup:function(e){return e},ajax:{url:sizeChartScriptObject.size_chart_admin_url,dataType:"json",delay:1e3,data:function(t){return{searchQueryParameter:t.term,action:"size_chart_search_chart",security:e(this).data("nonce"),exclude:e(this).data("exclude")}},processResults:function(a){return t=[],a&&e.each(a,function(e,a){t.push({id:e,text:a})}),{results:t}},cache:!0}};e(this).selectWoo(a).addClass("enhanced")})},loadColorPicker:function(){e("#color-picker1,#color-picker2,#color-picker3,#color-picker4,#color-picker5,#color-picker6").wpColorPicker()},loadPreviewSizeChart:function(){e("a.preview_chart").click(function(){var t,i=e(this).attr("id"),r=sizeChartScriptObject.size_chart_plugin_dash_name+"-inline-css";e(".size-chart-model").css("padding","0"),e("#wait").show(),e("[data-remodal-id=modal]").html(""),t={action:"size_chart_preview_post",chartID:i,security:sizeChartScriptObject.size_chart_nonce},e.ajax({type:"GET",url:sizeChartScriptObject.size_chart_admin_url,data:t,dataType:"json",beforeSend:function(){e("#wait").show().css("position","fixed")},complete:function(){e("#wait").hide().css("position","")},success:function(t){1===t.success?(e(".size-chart-model").css("padding","35px"),a.getElementById("md-size-chart-modal").style.display="block",e("#md-poup").after(t.html),e("#"+r).text(t.css)):alert("size-chart-for-woocommerc-premium==>"+t.msg)}})})},loadSizeChartProductMetaColumn:function(){e("#size-chart-menu-settings-column").bind("click",function(t){var a,i,r=e(t.target);r.hasClass("nav-tab-link")&&(a=r.data("type"),i=r.parents(".size-chart-accordion-section-content").first(),e("input",i).removeAttr("checked"),e(".tabs-panel-active",i).removeClass("tabs-panel-active").addClass("tabs-panel-inactive"),e("#"+a,i).removeClass("tabs-panel-inactive").addClass("tabs-panel-active"),e(".tabs",i).removeClass("tabs"),r.parent().addClass("tabs"),e(".quick-search",i).focus(),i.find(".tabs-panel-active .menu-item-title").length?i.removeClass("has-no-menu-item"):i.addClass("has-no-menu-item"),t.preventDefault())})},loadSizeChartProductMetaAjax:function(){e("div#tabs-panel-posttype-size-chart-all").on("click","ul.pagination li a.page-numbers",function(t){var a,i,r,s,c;t.preventDefault(),a={action:"size_chart_product_assign",pageNumber:e(this).data("page-number"),postID:e(this).data("post-id"),postPerPage:e(this).data("post-per-page"),security:e(this).parent().parent().data("nonce")},e.ajax({type:"GET",url:sizeChartScriptObject.size_chart_admin_url,data:a,dataType:"json",beforeSend:function(){e("div#tabs-panel-posttype-size-chart-all .spinner").addClass("is-active")},complete:function(){e("div#tabs-panel-posttype-size-chart-all .spinner").removeClass("is-active")},success:function(t){!0===t.success&&(e("ul#size-chart-checklist-all").empty(),e.each(t.found_products,function(t,a){i=e("<li/>"),e("<a />",{href:a.href.replace("&#038;","&"),text:a.title}).appendTo(i),i.appendTo("ul#size-chart-checklist-all")}),e("nav.pagination-box ul.pagination").empty(),e.each(t.load_pagination,function(t,a){r=e("<li/>"),"number"===a.pagination_mode?"span"===a.pagination_tag?s=e("<span />",{class:"page-numbers "+a.pagination_class,text:a.page_text}):(c="page-numbers ",""!==a.pagination_class&&(c+=a.pagination_class),s=e("<a />",{href:"javascript:void(0);",class:c,text:a.page_text,"data-post-id":a.post_id,"data-post-per-page":a.post_per_page,"data-page-number":a.page_number})):"dots"===a.pagination_mode&&(s=e("<span />",{class:"page-numbers "+a.pagination_class,text:a.page_text})),s.appendTo(r),r.appendTo("nav.pagination-box ul.pagination")}))}})}),e("div#tabs-panel-posttype-size-chart-search").on("input",".quick-search",function(){var t=e(this);t.attr("autocomplete","off"),i&&clearTimeout(i),i=setTimeout(function(){var a,i,r,s,c=t.val();c.length<2||(a=t.parents(".tabs-panel"),i={action:"size_chart_quick_search_products",security:t.data("nonce"),postType:t.data("post_type"),searchQueryParameter:c,type:t.attr("name")},e.ajax({type:"GET",url:sizeChartScriptObject.size_chart_admin_url,data:i,dataType:"json",beforeSend:function(){e(".quick-search-wrap .spinner",a).addClass("is-active")},complete:function(){e(".quick-search-wrap .spinner",a).removeClass("is-active")},success:function(t){e("ul#size-chart-search-checklist").empty(),!0===t.success?e.each(t.found_products,function(t,a){r=e("<li/>").appendTo("ul#size-chart-search-checklist"),s=e("<label />",{for:"size-chart-product-"+t,text:a.title}),e("<input />",{type:"checkbox",id:"size-chart-product-"+t,value:a.id,class:"product-item-checkbox",name:"product-item["+a.id+"]"}).prependTo(s),s.appendTo(r)}):(r=e("<li/>").appendTo("ul#size-chart-search-checklist"),(s=e("<p />",{text:t.msg})).appendTo(r))}}))},500)})},deleteSizeChartImage:function(){e("a.delete-chart-image").click(function(){var t={action:"size_chart_delete_image",postID:e(this).attr("id"),security:sizeChartScriptObject.size_chart_nonce};e.ajax({type:"GET",url:sizeChartScriptObject.size_chart_admin_url,data:t,beforeSend:function(){e("#wait").show().css("position","fixed")},complete:function(){e("#wait").hide().css("position","")},success:function(t){var a=e.parseJSON(t);1===a.success?(e("#field-image img").attr({src:a.url,width:"",height:""}),e("#primary-chart-image").val(""),e(".delete-chart-image").css("display","none"),alert(a.msg)):alert(a.msg)}})})},closeSizeChartModal:function(){e("div#md-size-chart-modal .remodal-close").click(function(){var t=a.getElementById("md-size-chart-modal");e(".chart-container").remove(),t.style.display="none"}),e("div.md-size-chart-overlay").click(function(){var t=a.getElementById("md-size-chart-modal");e(".chart-container").remove(),t.style.display="none"})},requiredSizeChartTitle:function(){e("body").on("submit.edit-post","#post",function(){var t,a,i;if(t=e("input#post_type").val(),sizeChartScriptObject.size_chart_post_type_name===t&&0===(a=e("#title")).val().replace(/ /g,"").length)return e("#size-chart-title-required-msg").length||(i=sizeChartScriptObject.size_chart_post_title_required,e("<div/>",{id:"size-chart-title-required-msg"}).appendTo("div#titlewrap"),e("<em/>",{text:i}).appendTo("#size-chart-title-required-msg"),e("input#title").css({border:"1px solid #c00","box-shadow":"0 0 2px rgb(204, 0, 0, 0.8)"})),e("#major-publishing-actions .spinner").hide(),e("#major-publishing-actions").find(":button, :submit, a.submitdelete, #post-preview").removeClass("disabled"),a.focus(),!1}),e("input#title").on("change",function(){e("#size-chart-title-required-msg").remove(),e("input#title").css({border:"1px solid #ddd"})})},deleteAssignedProducts:function(){e("span.remove-product-icon").click(function(t){if(!confirm("Are you sure want to remove the product from chart?"))return!1;var a={action:"size_chart_unassign_product",postID:e(this).data("id"),chartID:e(this).data("chart"),security:sizeChartScriptObject.size_chart_nonce};e.ajax({type:"POST",url:sizeChartScriptObject.size_chart_admin_url,data:a,beforeSend:function(){console.log("before send triggered")},complete:function(){console.log("complete triggered")},success:function(a){var i=e.parseJSON(a);1===i.success?(e(t.target).parent().remove(),0==e("#size-chart-checklist-all li").length&&e("#size-chart-checklist-all").text(sizeChartScriptObject.size_chart_no_product_assigned)):alert(i.msg)}})})}};e(a).ready(r.init)}(jQuery,window,document);